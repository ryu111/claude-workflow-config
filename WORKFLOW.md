# Claude Code Workflow

完整的自動化開發工作流程設計。

---

## 1. 系統架構

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                              USER (使用者)                                   │
│                                                                             │
│   輸入方式：                                                                 │
│   • 單一代理：「規劃一個購物車功能」                                          │
│   • 完整工作流：「規劃一個購物車功能 loop」                                    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            MAIN AGENT (主代理)                               │
│                                                                             │
│   職責：                                                                     │
│   1. 解析使用者意圖與觸發詞                                                   │
│   2. 分派任務給 Subagents                                                    │
│   3. 協調 D→R→T 工作流程                                                     │
│   4. 追蹤 tasks.md 進度                                                      │
│   5. 執行 git commit                                                        │
│   6. 決定下一步行動                                                          │
│                                                                             │
│   規則：                                                                     │
│   • Subagent 不能直接呼叫 Subagent                                          │
│   • 所有協調都經過 Main Agent                                                │
│   • Main Agent 負責所有 git 操作                                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
          ┌───────────────────────────┼───────────────────────────┐
          │                           │                           │
          ▼                           ▼                           ▼
┌─────────────────┐       ┌─────────────────┐       ┌─────────────────┐
│   ARCHITECT     │       │    DESIGNER     │       │   DEVELOPER     │
│   架構師         │       │    設計師        │       │    開發者        │
│                 │       │                 │       │                 │
│ • 分析需求       │       │ • UI/UX 設計    │       │ • 實作程式碼     │
│ • 設計架構       │       │ • 視覺規範      │       │ • 遵循規範       │
│ • 產出 tasks.md │       │ • 互動流程      │       │ • 建立/修改檔案  │
│                 │       │                 │       │                 │
│ model: sonnet   │       │ model: sonnet   │       │ model: sonnet   │
│ skills: ux      │       │ skills: ui, ux  │       │ skills: ui      │
└─────────────────┘       └─────────────────┘       └─────────────────┘

┌─────────────────┐       ┌─────────────────┐       ┌─────────────────┐
│    REVIEWER     │       │     TESTER      │       │    DEBUGGER     │
│    審查員        │       │    測試員        │       │    除錯員        │
│                 │       │                 │       │                 │
│ • 程式碼審查     │       │ • 撰寫測試      │       │ • 追蹤錯誤       │
│ • 範圍檢查       │       │ • 執行測試      │       │ • 找出根因       │
│ • DRY 檢查      │       │ • 回報問題      │       │ • 建議修復       │
│ • 品質把關       │       │                 │       │                 │
│                 │       │                 │       │                 │
│ model: opus    │       │ model: sonnet   │       │ model: sonnet   │
│ (最嚴格)        │       │                 │       │                 │
└─────────────────┘       └─────────────────┘       └─────────────────┘
```

---

## 2. 觸發詞對照表

### 單一代理模式

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          SINGLE AGENT MODE                                   │
├──────────────────────┬───────────────┬──────────────────────────────────────┤
│ 觸發詞                │ 代理          │ 動作                                  │
├──────────────────────┼───────────────┼──────────────────────────────────────┤
│ 規劃, plan, 新功能    │ ARCHITECT     │ 產出 SDD + tasks.md                  │
│ 設計, design, UI, UX  │ DESIGNER      │ 產出設計規格                          │
│ 實作, implement, code │ DEVELOPER     │ 撰寫程式碼                           │
│ 審查, review, 檢查    │ REVIEWER      │ 程式碼審查                           │
│ 測試, test, 驗證      │ TESTER        │ 撰寫/執行測試                        │
│ debug, 除錯, bug      │ DEBUGGER      │ 追蹤並修復問題                       │
└──────────────────────┴───────────────┴──────────────────────────────────────┘
```

### 完整工作流模式

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          FULL WORKFLOW MODE                                  │
├──────────────────────────────────┬──────────────────────────────────────────┤
│ 觸發詞                            │ 動作                                     │
├──────────────────────────────────┼──────────────────────────────────────────┤
│ 「規劃 ... loop」                 │ ARCHITECT → D→R→T 循環直到完成           │
│ 「loop 做 ...」                   │ ARCHITECT → D→R→T 循環直到完成           │
│ 「完整開發 ...」                  │ ARCHITECT → D→R→T 循環直到完成           │
│ 「自動完成 ...」                  │ ARCHITECT → D→R→T 循環直到完成           │
└──────────────────────────────────┴──────────────────────────────────────────┘

範例：
• 「規劃一個購物車功能」           → 只有 ARCHITECT（產出 tasks.md）
• 「規劃一個購物車功能 loop」      → 完整工作流直到完成
• 「loop 做一個登入系統」          → 完整工作流直到完成
```

---

## 3. 完整工作流程

### Phase 1: 規劃階段

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           PLANNING PHASE                                     │
│                                                                             │
│   USER: 「規劃一個購物車功能 loop」                                          │
│                        │                                                    │
│                        ▼                                                    │
│              ┌─────────────────┐                                            │
│              │   ARCHITECT     │                                            │
│              │                 │                                            │
│              │ 1. 分析現有程式碼 │                                           │
│              │ 2. 設計架構方案  │                                            │
│              │ 3. 產出 tasks.md │                                            │
│              └─────────────────┘                                            │
│                        │                                                    │
│                        ▼                                                    │
│              ┌─────────────────┐                                            │
│              │   DESIGNER      │  ← 如果需要 UI                              │
│              │   (可選)        │                                            │
│              └─────────────────┘                                            │
│                        │                                                    │
│                        ▼                                                    │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                        tasks.md                                      │  │
│   │                                                                      │  │
│   │  ## 1. Foundation (sequential)                                       │  │
│   │  - [ ] 1.1 建立購物車型別 | files: src/types/cart.ts                 │  │
│   │  - [ ] 1.2 建立購物車 Store | files: src/store/cart.ts               │  │
│   │                                                                      │  │
│   │  ## 2. Core Features (parallel)                                      │  │
│   │  - [ ] 2.1 購物車 API | files: src/api/cart.ts                       │  │
│   │  - [ ] 2.2 購物車元件 | files: src/components/Cart.tsx               │  │
│   │  - [ ] 2.3 購物車 Hook | files: src/hooks/useCart.ts                 │  │
│   │                                                                      │  │
│   │  ## 3. Integration (sequential, depends: 2)                          │  │
│   │  - [ ] 3.1 整合購物車頁面 | files: src/pages/cart.tsx                │  │
│   │                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Phase 2: 執行階段

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          EXECUTION PHASE                                     │
│                                                                             │
│   Phase 類型：                                                               │
│   • sequential - 依序執行                                                    │
│   • parallel   - 同時執行（檔案不能重複！）                                   │
│   • depends: N - 等待 Phase N 完成                                          │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                                                                      │  │
│   │   Phase 1 (sequential)          Phase 2 (parallel)                   │  │
│   │   ┌────────┐                    ┌────────┐ ┌────────┐ ┌────────┐    │  │
│   │   │Task 1.1│                    │Task 2.1│ │Task 2.2│ │Task 2.3│    │  │
│   │   └───┬────┘                    └───┬────┘ └───┬────┘ └───┬────┘    │  │
│   │       │                             │         │         │          │  │
│   │       ▼                             └────┬────┴────┬────┘          │  │
│   │   ┌────────┐                             │         │               │  │
│   │   │Task 1.2│                             ▼         ▼               │  │
│   │   └───┬────┘                        等待全部完成                     │  │
│   │       │                                  │                          │  │
│   │       ▼                                  ▼                          │  │
│   │   完成 Phase 1 ─────────────────▶ Phase 3 (depends: 2)              │  │
│   │                                    ┌────────┐                       │  │
│   │                                    │Task 3.1│                       │  │
│   │                                    └────────┘                       │  │
│   │                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Phase 3: 單一任務流程 (D→R→T Cycle)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        TASK EXECUTION (D→R→T)                                │
│                                                                             │
│   每個 checkbox 任務都要經過這個循環：                                        │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                                                                      │  │
│   │   Task: - [ ] 2.1 購物車 API | files: src/api/cart.ts               │  │
│   │                              │                                       │  │
│   │                              ▼                                       │  │
│   │                     ┌─────────────────┐                              │  │
│   │                     │   DEVELOPER     │                              │  │
│   │                     │                 │                              │  │
│   │                     │ 撰寫程式碼       │                              │  │
│   │                     │ 只能改指定檔案   │                              │  │
│   │                     └────────┬────────┘                              │  │
│   │                              │                                       │  │
│   │                              ▼                                       │  │
│   │                     ┌─────────────────┐                              │  │
│   │                     │    REVIEWER     │                              │  │
│   │                     │                 │                              │  │
│   │                     │ 檢查：           │                              │  │
│   │                     │ • 範圍是否正確   │                              │  │
│   │                     │ • 有無重複程式碼  │                              │  │
│   │                     │ • 程式碼品質     │                              │  │
│   │                     └────────┬────────┘                              │  │
│   │                              │                                       │  │
│   │              ┌───────────────┴───────────────┐                       │  │
│   │              │                               │                       │  │
│   │              ▼                               ▼                       │  │
│   │     ┌─────────────────┐             ┌─────────────────┐              │  │
│   │     │  🔄 REJECT      │             │  ✅ APPROVE     │              │  │
│   │     │                 │             │                 │              │  │
│   │     │ retry_count++   │             │                 │              │  │
│   │     └────────┬────────┘             └────────┬────────┘              │  │
│   │              │                               │                       │  │
│   │              │                               ▼                       │  │
│   │              │                      ┌─────────────────┐              │  │
│   │              │                      │     TESTER      │              │  │
│   │              │                      │                 │              │  │
│   │              │                      │ • 撰寫測試      │              │  │
│   │              │                      │ • 執行測試      │              │  │
│   │              │                      └────────┬────────┘              │  │
│   │              │                               │                       │  │
│   │              │               ┌───────────────┴───────────────┐       │  │
│   │              │               │                               │       │  │
│   │              │               ▼                               ▼       │  │
│   │              │      ┌─────────────────┐             ┌─────────────┐  │  │
│   │              │      │   ❌ FAIL       │             │  ✅ PASS    │  │  │
│   │              │      └────────┬────────┘             └──────┬──────┘  │  │
│   │              │               │                             │        │  │
│   │              │               ▼                             │        │  │
│   │              │      ┌─────────────────┐                    │        │  │
│   │              │      │    DEBUGGER     │                    │        │  │
│   │              │      │                 │                    │        │  │
│   │              │      │ • 找出根因      │                    │        │  │
│   │              │      │ • 建議修復方式   │                    │        │  │
│   │              │      └────────┬────────┘                    │        │  │
│   │              │               │                             │        │  │
│   │              │               │ retry_count++               │        │  │
│   │              ▼               ▼                             │        │  │
│   │         retry_count < 3?                                   │        │  │
│   │              │                                             │        │  │
│   │     ┌───────┴───────┐                                      │        │  │
│   │     │               │                                      │        │  │
│   │    YES             NO                                      │        │  │
│   │     │               │                                      │        │  │
│   │     ▼               ▼                                      ▼        │  │
│   │  回到           ┌─────────────┐                    ┌─────────────┐  │  │
│   │  DEVELOPER      │  ESCALATE   │                    │ MAIN AGENT  │  │  │
│   │                 │             │                    │             │  │  │
│   │                 │ 回報失敗     │                    │ 1. Mark [x] │  │  │
│   │                 │ 給 ARCHITECT│                    │ 2. git commit│  │  │
│   │                 │ 重新規劃     │                    │ 3. 下一任務  │  │  │
│   │                 └─────────────┘                    └─────────────┘  │  │
│   │                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. 防護機制 (Safeguards)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              SAFEGUARDS                                      │
├─────────────────────┬─────────┬─────────────────────────────────────────────┤
│ 參數                 │ 值      │ 說明                                        │
├─────────────────────┼─────────┼─────────────────────────────────────────────┤
│ max_iterations      │ 10      │ Ralph Loop 最大迭代次數                      │
│ max_retries         │ 3       │ 單一任務 D→R→T 最大重試次數                   │
│ max_skills          │ 10      │ 最多注入 10 個 skill 檔案                    │
│ max_skill_size      │ 10KB    │ 單一 skill 檔案大小上限                       │
│ max_total_skills    │ 50KB    │ 總 skills 大小上限                           │
└─────────────────────┴─────────┴─────────────────────────────────────────────┘
```

### 重試限制流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          RETRY LIMIT FLOW                                    │
│                                                                             │
│   Task 2.1: DEVELOPER ──▶ REVIEWER                                          │
│                              │                                              │
│              ┌───────────────┼───────────────┐                              │
│              │               │               │                              │
│           REJECT          REJECT          REJECT                            │
│          retry=1         retry=2         retry=3                            │
│              │               │               │                              │
│              ▼               ▼               ▼                              │
│          DEVELOPER       DEVELOPER       ESCALATE                           │
│              │               │               │                              │
│              │               │               ▼                              │
│              │               │        ┌─────────────────┐                   │
│              │               │        │    停止任務      │                   │
│              │               │        │                 │                   │
│              │               │        │ 回報給使用者：   │                   │
│              │               │        │ • Task 2.1 失敗  │                   │
│              │               │        │ • 失敗原因摘要   │                   │
│              │               │        │ • 建議：拆分任務  │                   │
│              │               │        │   或重新定義範圍  │                   │
│              │               │        └─────────────────┘                   │
│              │               │                                              │
│              └───────────────┴──────▶ 繼續嘗試                               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 平行任務檔案衝突檢查

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     PARALLEL FILE CONFLICT CHECK                             │
│                                                                             │
│   ARCHITECT 在規劃 parallel phase 時必須驗證：                               │
│                                                                             │
│   ✅ 有效（每個任務獨立檔案）：                                               │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  ## 2. Core Features (parallel)                                      │  │
│   │  - [ ] 2.1 User API  | files: src/api/user.ts    ← 獨立檔案          │  │
│   │  - [ ] 2.2 Cart API  | files: src/api/cart.ts    ← 獨立檔案          │  │
│   │  - [ ] 2.3 Order API | files: src/api/order.ts   ← 獨立檔案          │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   ❌ 無效（多個任務改同一檔案）：                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  ## 2. Core Features (parallel)                                      │  │
│   │  - [ ] 2.1 Add user  | files: src/api/index.ts   ← 衝突！            │  │
│   │  - [ ] 2.2 Add cart  | files: src/api/index.ts   ← 衝突！            │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   解決方案：                                                                 │
│   1. 轉換為 sequential                                                      │
│   2. 拆分成獨立檔案                                                         │
│   3. 在最後加一個整合任務                                                    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. Ralph Loop 生命週期

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         RALPH LOOP LIFECYCLE                                 │
│                                                                             │
│   使用者：/ralph-loop "規劃購物車功能" --completion-promise "COMPLETE"       │
│                        --max-iterations 10                                  │
│                                      │                                      │
│                                      ▼                                      │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │  建立狀態檔案：.claude/ralph-loop.local.md                           │  │
│   │  ---                                                                 │  │
│   │  iteration: 1                                                        │  │
│   │  max_iterations: 10                                                  │  │
│   │  completion_promise: "COMPLETE"                                      │  │
│   │  ---                                                                 │  │
│   │  規劃購物車功能                                                       │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                      │                                      │
│                                      ▼                                      │
│   ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐  │
│   │                        ITERATION 1                                   │  │
│   │                                                                      │  │
│   │   Main Agent 執行工作流...                                           │  │
│   │   輸出：「Phase 1 進行中...」                                         │  │
│   │                                                                      │  │
│   │   Stop Hook 檢查：                                                   │  │
│   │   有 <promise>COMPLETE</promise>？                                   │  │
│   │                     │                                                │  │
│   │            ┌────────┴────────┐                                       │  │
│   │            │                 │                                       │  │
│   │           NO                YES                                      │  │
│   │            │                 │                                       │  │
│   │            ▼                 ▼                                       │  │
│   │   阻擋退出            刪除狀態檔案                                    │  │
│   │   iteration++         結束 Loop                                      │  │
│   │   餵回同一個 prompt                                                  │  │
│   └ ─ ─ ─ ─ ─ ┼ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘  │
│                │                                                            │
│                ▼                                                            │
│   ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐  │
│   │                        ITERATION 2...N                               │  │
│   │                                                                      │  │
│   │   繼續執行，可看到之前的 git history 和檔案變更                        │  │
│   │   ...                                                                │  │
│   └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘  │
│                │                                                            │
│                ▼                                                            │
│   ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐  │
│   │                        FINAL ITERATION                               │  │
│   │                                                                      │  │
│   │   所有任務完成！                                                      │  │
│   │   輸出：「✅ 所有任務已完成 <promise>COMPLETE</promise>」             │  │
│   │                                                                      │  │
│   │   Stop Hook 檢查：找到 <promise>COMPLETE</promise>                   │  │
│   │   → 允許退出                                                         │  │
│   │   → 刪除 .claude/ralph-loop.local.md                                │  │
│   └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘  │
│                                      │                                      │
│                                      ▼                                      │
│                            ┌─────────────────┐                              │
│                            │   SESSION END   │                              │
│                            │                 │                              │
│                            │ • 所有任務 [x]  │                              │
│                            │ • 所有測試通過  │                              │
│                            │ • 程式碼已提交  │                              │
│                            └─────────────────┘                              │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 6. Skills 注入機制

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          SKILLS INJECTION                                    │
│                                                                             │
│   全域 ~/.claude/                    專案 .claude/                          │
│   ┌─────────────────────────┐       ┌─────────────────────────┐            │
│   │ agents/                 │       │ skills/                 │            │
│   │  ├─ architect.md        │       │  ├─ nextjs.md          │            │
│   │  ├─ developer.md        │       │  ├─ prisma.md          │            │
│   │  ├─ reviewer.md         │       │  └─ stripe.md          │            │
│   │  ├─ tester.md           │       └───────────┬─────────────┘            │
│   │  ├─ debugger.md         │                   │                          │
│   │  └─ designer.md         │                   │                          │
│   │                         │                   │                          │
│   │ hooks/                  │                   │                          │
│   │  └─ inject-skills.sh ◀──┼───────────────────┘                          │
│   │                         │       SubagentStart Hook                     │
│   │ skills/                 │       掃描並注入所有                           │
│   │  ├─ ui.md              │       專案 skills                             │
│   │  └─ ux.md              │                                               │
│   └─────────────────────────┘                                              │
│                                                                             │
│   注入流程：                                                                 │
│   1. Subagent 啟動                                                         │
│   2. SubagentStart Hook 觸發                                               │
│   3. inject-skills.sh 掃描 .claude/skills/                                 │
│   4. 讀取所有 *.md 檔案（限制：10 檔、10KB/檔、50KB 總量）                   │
│   5. 注入為 systemMessage                                                   │
│   6. Subagent 獲得專案知識                                                  │
│                                                                             │
│   優先順序：專案 skills > 全域 skills                                        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 7. Git 策略

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            GIT STRATEGY                                      │
│                                                                             │
│   時機：每個任務通過 D→R→T 後由 MAIN AGENT 執行                              │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                                                                      │  │
│   │   TESTER ✅ PASS                                                     │  │
│   │        │                                                             │  │
│   │        ▼                                                             │  │
│   │   MAIN AGENT:                                                        │  │
│   │        │                                                             │  │
│   │        ├─▶ 1. 更新 tasks.md: - [x] 2.1 購物車 API ✓                  │  │
│   │        │                                                             │  │
│   │        ├─▶ 2. git add src/api/cart.ts src/api/cart.test.ts          │  │
│   │        │                                                             │  │
│   │        ├─▶ 3. git commit -m "feat(task-2.1): 實作購物車 API"         │  │
│   │        │                                                             │  │
│   │        └─▶ 4. 繼續下一個任務                                         │  │
│   │                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   Commit Message 格式：                                                     │
│   • feat(task-X.X): <描述>     - 新功能                                    │
│   • fix(task-X.X): <描述>      - 修復 Bug                                  │
│   • refactor(task-X.X): <描述> - 重構                                      │
│   • test(task-X.X): <描述>     - 測試                                      │
│                                                                             │
│   PR 策略（可選）：                                                         │
│   • 每個 Phase 完成後建立 PR                                                │
│   • 或全部任務完成後建立單一 PR                                              │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 8. 檔案結構

```
全域配置 (~/.claude/)
├── CLAUDE.md              # 全域指令 + 語言設定
├── WORKFLOW.md            # 本檔案
├── settings.json          # 插件 + Hooks 配置
│
├── agents/                # 6 個專業代理
│   ├── architect.md       # 架構師 (sonnet, skills: ux)
│   ├── developer.md       # 開發者 (sonnet, skills: ui)
│   ├── reviewer.md        # 審查員 (opus) - 最嚴格
│   ├── tester.md          # 測試員 (sonnet)
│   ├── debugger.md        # 除錯員 (sonnet)
│   └── designer.md        # 設計師 (sonnet, skills: ui, ux)
│
├── skills/                # 全域知識
│   ├── ui.md              # 視覺設計規範
│   └── ux.md              # 使用者體驗規範
│
└── hooks/
    └── inject-skills.sh   # 動態 skill 注入

專案配置 (.claude/)
└── skills/                # 專案專屬知識
    ├── framework.md       # 框架慣例
    ├── database.md        # 資料庫規範
    └── api.md             # API 規格
```

---

## 9. 快速參考

### 指令

| 指令 | 說明 |
|------|------|
| `規劃 [功能]` | 只產出 tasks.md |
| `規劃 [功能] loop` | 完整工作流直到完成 |
| `/ralph-loop "prompt"` | 啟動 Ralph Loop |
| `/cancel-ralph` | 手動停止 Loop |

### 參數

| 參數 | 預設值 |
|------|--------|
| max_iterations | 10 |
| max_retries | 3 |
| max_skills | 10 |
| max_skill_size | 10KB |
| max_total_skills | 50KB |